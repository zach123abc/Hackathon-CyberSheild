{% extends "base.html" %}

{% block title %}Password Generator{% endblock %}

{% block content %}
<a class="back-btn" href="{{ url_for('menu') }}">‚Üê Back</a>

<section class="page-header">
  <h1>Generate a Strong Password</h1>
  <p>Customize the length and character set to create secure, unique passwords.</p>
</section>

<div class="generator-box">
  <form method="post">
    <label for="length">Password Length:</label>
    <input type="number" id="length" name="length" min="4" max="64" value="12" required>

    <fieldset>
      <legend>Include Characters:</legend>
      <label><input type="checkbox" id="letters" name="letters" checked> Letters</label>
      <label><input type="checkbox" id="numbers" name="numbers" checked> Numbers</label>
      <label><input type="checkbox" id="symbols" name="symbols" checked> Symbols</label>
    </fieldset>

    <button type="submit" class="primary-btn">Generate</button>
  </form>

  {% if password %}
  <div class="result-box">
    <p><strong>Generated Password:</strong> <span id="password">{{ password }}</span></p>
    <button id="copyBtn" class="secondary-btn">Copy</button>
  </div>
  {% endif %}
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const copyBtn = document.getElementById('copyBtn');
  if (!copyBtn) return;
  copyBtn.addEventListener('click', async () => {
    const pw = document.getElementById('password').textContent;
    try {
      await navigator.clipboard.writeText(pw);
      copyBtn.textContent = 'Copied!';
      setTimeout(() => copyBtn.textContent = 'Copy', 1400);
    } catch {
      copyBtn.textContent = 'Copy failed';
    }
  });
});
</script>
{% endblock %}
