{% extends "base.html" %}

{% block title %}Generate Password{% endblock %}

{% block content %}
<a class="back-btn" href="{{ url_for('menu') }}">‚Üê Back</a>
<h1>Generate a Password</h1>

<form method="post">
  <label for="length">Password Length:</label>
  <input type="number" id="length" name="length" min="4" max="64" value="12" required>

  <label>Include Characters:</label>
  <input type="checkbox" id="letters" name="letters" checked> Letters
  <input type="checkbox" id="numbers" name="numbers" checked> Numbers
  <input type="checkbox" id="symbols" name="symbols" checked> Symbols

  <button type="submit">Generate</button>
</form>

{% if password %}
<p><strong>Generated Password:</strong> <span id="password">{{ password }}</span></p>
<button id="copyBtn">Copy to clipboard</button>
{% endif %}

<script>
document.addEventListener('DOMContentLoaded', function () {
  const copyBtn = document.getElementById('copyBtn');
  if (!copyBtn) return;
  copyBtn.addEventListener('click', async () => {
    const pw = document.getElementById('password').textContent;
    try {
      await navigator.clipboard.writeText(pw);
      copyBtn.textContent = 'Copied!';
      setTimeout(() => copyBtn.textContent = 'Copy to clipboard', 1400);
    } catch {
      copyBtn.textContent = 'Copy failed';
    }
  });
});
</script>
{% endblock %}
